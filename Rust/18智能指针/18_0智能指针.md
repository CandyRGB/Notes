## 智能指针
**智能指针**（smart pointers）是一类数据结构，它们的表现类似指针，但是拥有额外的元数据和功能。

### 引用计数（reference counting）智能指针类型
这种指针允许数据有多个所有者，它会记录所有者的数量，当没有所有者时清理数据。

### 引用vs智能指针
|引用|智能指针|
|:-|:-|
|**只借用**数据|大部分情况下，**拥有**它指向的数据|

### 已经使用过的智能指针
`String`、`Vec<T>`：
- 它们都拥有一些数据，并允许用户修改。
- 它们还拥有元数据。例如`String`存储了其**容量**作为元数据
- 它们还有额外的功能或保证。例如`String`确保其数据总是有效的 UTF-8 编码。

### 智能指针的实现
1. 使用结构体实现。
2. 实现了`Deref`和`Drop` trait 。
   - `Deref`（ dereference - 解引用）：允许智能指针结构体实例像引用一样使用，这样就可以编写既用于引用、又用于智能指针的代码。
   - `Drop`（丢弃）：允许我们自定义当智能指针离开作用域时运行的代码。 

### 常用智能指针
`Box<T>`：用于在堆上分配值。
`Rc<T>`：一个引用计数类型，其数据可以有多个所有者。
`Ref<T>`和`RefMut<T>`，通过`RefCell<T>`访问。（`RefCell<T>`是一个在运行时而不是在编译时执行借用规则的类型）。